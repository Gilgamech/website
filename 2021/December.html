<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
		<link rel="shortcut icon" href="https://www.Gilgamech.com/images/favicon.ico" type="image/x-icon"/>
		<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="og:title" content="Gilgamech's blogging loudly again." />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://www.Gilgamech.com/blog.html" />
<meta property="og:description" content="Creating art from math and philosophy from technology. Have a look at the world from a unique point of view." />
<meta property="og:image" content="https://www.Gilgamech.com/images/BigG.jpg" />
<meta name="description" content="Creating art from math and philosophy from technology. Have a look at the world from a unique point of view.">
<meta name="keywords" content="blog">
<meta name="author" content="Gilgamech Technologies">
		<title>Gilgamech Technologies</title>
		<script src="https://www.Sparational.com/Sparational.js"></script>
		<script src="https://www.Gilgamech.com/js/Gilgamech.js"></script>
		<link href="https://www.Gilgamech.com/css/normalize.css" rel="stylesheet" type="text/css">
		<link href="https://www.Gilgamech.com/css/Gilgamech.css" rel="stylesheet" type="text/css">
	</head>
	<body>
		<div id="titleParent" class="titleContainer">
			<a class="pageTitle " href="/">Gilgamech Technologies</a>
		</div>
		<style type="text/css"> body { background-color: #700; } .textBubbleBG { border: 1px solid #32CD32;}</style>
		<nav id="navContainer"></nav><script>convertWebElement('navContainer',"https://www.Gilgamech.com/sites/menu.md")</script>
		<div id="content">
			<div class="textBubbleBG"><h4>From the <a href="https://www.youtube.com/watch?v=CNUTlKqSO-I">sublime</a> to the <a href="https://www.youtube.com/watch?v=NKVkMEhtkI8">ridiculous</a>.</h4></div><br><br>

			<div class="textBubbleBG">
				<h2 id="12312021"><a href="#12312021">12/31/2021</a> - Wintertime acceleration traction.</h2>
				<p>Ice is well known for having much less friction than <a href="https://en.wikipedia.org/wiki/Tarmacadam">bituminous tarmacadam</a> (aka asphalt), a situation that often confounds drivers in winter. Indeed, <a href="https://iopscience.iop.org/article/10.1088/0031-9120/43/4/006">ice's coefficient is about 5%</a>, while <a href="http://hyperphysics.phy-astr.gsu.edu/hbase/Mechanics/frictire.html">dry asphalt's is up to 70%, with 40% for wet asphalt</a>, for an all-season radial tire. Untreaded racing slicks increase this to <a href="http://boson.physics.sc.edu/~rjones/phys101/tirefriction.html">90% when dry - and this falls to 10% when wet</a>, which is why racecar drivers make a pitstop when it starts raining, to change to all season radials.</p>
				<p>This compounds the internal combustion engine's "initial inertia" issue - how to get a vehicle started from a full stop. Moving a vehicle from 0 MPH means adding momentous energy to it until it reaches 1 MPH, and so on and so forth, until it reaches the desired speed. The internal combustion engine has a minimum rotation speed (usually around 800 RPMs) to remain operational - lower than this and an individual combustion doesn't have the energy to rotate the engine. So there's a gap between the 800 RPM minimum and the, like, 1 RPM needed to reach that 1 MPH. How to bridge it? Rails for trains have a <a href="https://the-contact-patch.com/book/rail/r1717-friction-between-wheel-and-rail">coefficient of max 50% when dry and 30% when wet</a>, which is right around the 40% for wet asphalt. So trains essentially "spin out" until the train gets close to the wheel's speed. And while fine with steel wheels, <a href="https://www.youtube.com/watch?v=5qanlirrRWs&t=2m">Ken Block eats styrene-butadiene tires for breakfast</a>.</p>
				<h4>Energy transmission and conversion.</h4>
				<p>So how do cars solve this? Transmissions, which convert some of the rotational energy into more torque. Several types are common:</p><ul>
				<li>Dry-clutch manual - burns clutch pad instead of tire, with the driver manually adjusting the pressure between 2 asbestos plates, letting partial friction transfer some of the rotational energy to the wheels. Once up to speed, the strong spring holding the 2 plates together transfers like 95% of engine power. The driver has to manually shift between gears using the clutch pedal and gear shifter. (Which can be quite fun.)</li>
				<li>Hydrostatic automatic - churns highly-viscous transmission fluid instead of clutch pad, but this loses about 33% of engine power to friction, viscosity, turbulence,and emulsions. Usually this is coupled with a <a href="https://itstillruns.com/transmission-drum-7833066.html">drum-style gearset</a> and rotational shifter that downshifts with higher engine speed and upshifts with higher wheel speed. These sometimes "lock" to the engine at highway speeds, where most transmissions are simply transferring engine power at a 1:1 ratio and not multiplying its torque.</li>
				<li>Dual-shift manual - a pair of alternating-gear manual transmissions automatically shifted between - one set has 1,3,5(,7,9) and the other 2,4(,6,8,10) - so the engine will shift one, transfer power between, and shift the other. It still burns clutch pad at the get-go.</li>
				<li>Continuous-variable automatic - This is a hydrostatic automatic with an <a href="https://gearsmagazine.com/wp-content/uploads/2019/06/Screen-Shot-2019-06-03-at-9.31.54-AM.png">oddly-complex steel belt</a> between two pulleys instead of the drum transmission.
				<li>Gas-electric automatic - essentially an electric car with 1 mile of battery range, and a built-in gas generator to recharge the batteries. At a stop, the engine is usually off, and traction is provided by the <a href="https://www.youtube.com/watch?v=dLNDGUISTYM&t=837s">2 "traction motors" MG1 &amp; MG2</a> propel the car for lower acceleration. A planetary gearset combines MG1 and engine inputs to transmission output, allowing MG1 to both start the engine and siphon engine power to conrol speed - up to highway speeds where it locks, giving a 1:1 ratio power transfer from engine to wheels, like other transmissions. The siphoned engine power is stored in the batteries.</li>
				</ul><p>Most of these are designed around a minimum friction coefficient around that of all season tires on wet asphalt of 40%, which creates another gap with ice's 5% coefficient.</p>
				<h4>Relationship with tire speed:</h4>
				<p>The other side of this issue is the maximum wheel torque possible to maintain friction. Asphalt has a much, much higher capacity for heat, and so can absorb and withstand significantly more torque than ice before changing states to liquid. (This can still happen in the summer heat.) The friction coefficient represents this, where 1 minus the coefficient is turned into heat, and the friction coefficient becomes the percentage of energy that can be transferred without melting the surface. Liquids basically have viscosity instead of friction, and liquid water has low viscosity, causing the tire to spin once too much energy has been transferred - as the water transitions from solid to liquid, its abiltiy to frictionally transfer energy plummets. So this is an equation with a minimum rotation based on engine speed, and a maximum rotation based on the coefficient, meaning the equation sometimes doesn't balance. This results in the system having either too-low rotational energy (engine stall) or too high rotational energy (spin out), or sometimes both at once. There is no Goldilocks here.</p>
				<p>And there are yet more solutions to bridge this:</p><ul>
				<li>Power to all wheels is the ultimate acceleration traction solution, using a <a href="http://4x4abc.com/4WD101/diagonal.html">differential transmission to average both torque and the friction coefficient between all 4 tires</a>, but involves adding weight and complexity. Usual options are either 4x4, 4WD, one of the AWD varieties, or dual-motor/rear-motor eAWD (for electrics and hybrids). Each has specific advantages and disadvantages over the others.</li>
				<li>Tire chains are the ultimate stopping and handling traction solution, raising the traction coefficient on ice back into the neighborhood of wet pavement. A downside is that they are somewhat fragile and break easily. Also, chains on pavement can actually <i>reduce</i> traction coefficient back to ice levels, as the metal chains slide on pavement like train wheels on steel rails, causing a chained vehicle to become disabled on a dry road.</li>
				<li>Studded tires are similar to tire chains, requiring more work to install but being more durable. These cause heavy wear on asphalt and concrete roadways, and may not be legal for most of the year. They increase the friction coefficient by around 75%, increasing ice's coeffiicent from 5% up closer to 9%, <a href="https://www.wsdot.wa.gov/research/reports/fullreports/551.1.pdf">but sometimes up to 13%</a>. These too reduce the tire's friction coefficient on dry asphalt, but only by 5% (down from 70% to 66.5%) so shouldn't noticeably increase fuel usage.</li>
				</ul>
				<p>Electric cars (both BEV and Hybrid) can use a type of eAWD. These cars are known for high torque output at zero RPMs, which is a struggle described above for internal combustion. The drivetrains are decoupled from any minimum rotations needed by an internal combustion engine, and are free to output the motor's maximum. And often an electric car's accelerator pedal inputs are written pretty aggressively to the motor outputs, to showcase performance on dry pavement. Which reintroduces the power gap described above for internal combustion.</p>
				<h4>Many come with another option: Eco mode</h4>
				<p>Eco mode makes the accelerator pedal a lot less sensitive, like there's a spring between it and the throttle body, which is perfect for snow and ice (and sand and gravel, but those are other stories). Going just 1 or 2 MPH becomes effortless, and while you're not racing around downtown like a 4x4 lifted truck, you're not stuck in a parking lot either. Plowed roads and packed snow turn into viable routes, and snow goes from being exciting to merely pretty.</p>
			</div><br><br>
			<div class="textBubbleBG">
				<h2 id="12282021"><a href="#12282021">12/28/2021</a> - What's the difference between kilowatts and Newton-meters?</h2>
				<h3>Cars are rated in both - often seeing a peak in KW a lower engine rotational output than Netwon-meters.</h3>
				<p>These are the SI conversions from traditional measurements of horsepower (HP - the force necessary to lift a total mass of 33,000 pounds upwards by one foot in one minute) and torque (lb-ft, the force necessary to lift a total mass of 1 pounds rotationally at one foot from the pivot point.) Indeed, these can be converted to each other, once resolving the dimensional mismatch: Torque has units of mass and height, but HP has units of mass and height, and time which will have to be divided off. So torque can be converted to HP/min, giving 1 HP/min = 33,000 lb-ft. But there's still the rotation - the 33,000 has to be divided around a circle, aka by 2Ï€, so 1 HP/min = 5252 lb-ft.</p>
				<h3>A little history.</h3>
				<p>Horsepower was originally determined from the <a href="https://www.sciencefocus.com/science/how-much-horsepower-does-a-horse-have/">amount of work a horse performed over a day</a> while pulling a mill wheel. Torque comes from the <a href="https://en.global-tohnichi.com/special/">Roman name for the twisting patterns of Celtic necklaces</a>, and now means the forces involved in twisting or rotation.</p>
				<h3>So what's being measured here?</h3>
				<p>Converting them to SI units are a clue. Broadly speaking, Horsepower is energy delivered across a span of time, while torque is energy delivered at a moment in time. (Humans are capable of generating more than 1 HP in short bursts.) Torque is the ability to spin the wheels, while kW/HP is the ability to convert fuel into raw velocity. Combustion engines give different RPM values for these as energy output doesn't scale linearly with fuel consumption, partly due to engine timing differences, and partly due to the gearbox which is basically mandatory with internal combustion.</p>
				<h3>Last notes:</h3>
				<p>Horsepower is a time-dependent metric, but people often rattle it off without the time dimension, making it meaningless. Pay attention to torque and 0-60 numbers.</p>
			</div><br><br>
			<div class="textBubbleBG">
				<h2 id="12252021"><a href="#12252021">12/25/2021</a> - Information transmission with quantum entanglement.</h2>
				<p>Entangled particles have no propagation delay, despite the distances between them. And they will always have inverted polarity. So we have a sender and receiver, and the receiver always measures the polarization in the Z-down direction. The sender is transmitting a binary stream, and so measures in the Z-up direction for 1s, and for 0s measures in the X-down direction. Measuring "resets" the polarity along the measured direction, in the same way that all photons passing through a polarized film (aka sunglasses) are <a href="https://www.youtube.com/watch?v=zcqZHYo7ONs">polarized in the same direction</a> from the film's tiny slits. (This polarization is a huge part of the double-slit experiment.) And so the recipient would measure in the Z-down direction foreach of these, and converting the positive Z-down outcome as 1s, leaving the rest to zeroes. X-down measurement will result in an X-up polarization of the remote particle, so in theory this would always generate a negative result in a Z-down measurement. - the actual measurement vector of the binary zero might be a different measurement. And of course data would travel through data redundancy tools like <a href="https://en.wikipedia.org/wiki/Hamming_code">Hamming codes</a>, just like CDs and RAM, to prevent single-bit transmission losses.</p>
			</div><br><br>

			<div class="textBubbleBG">
				<h2 id="12232021"><a href="#12232021">12/23/2021</a> - Code chunk to update SG:</h2>
				<h4>#Step 1: Prereq Variables</h4>
				<div class="codeWrapper">
					[string]<span class="PSVariable">$AvailabilityZone</span> = "us-west-2a"<br>
					<span class="PSVariable">$DefaultSecurityGroupID</span> = "sg-123456" #Update with your hosting SG.
				</div>

				<h4>#Step 2: Prereq Functions</h4>
				<p>#These can be found in my <a href="#12012021">December 1st</a> post, among others.</p>
				<div class="codeWrapper">
					#Function Flip-BytesToText<br>
					#Function Reset-AwsApiKey<br>
					#Function New-RdpSecurityGroup<br>
				</div>

				<h4>#Step 3: Main Code</h4>
				<div class="codeWrapper">
					Set-DefaultAWSRegion -Region (<span class="PSVariable">$AvailabilityZone</span>.Substring(0,<span class="PSVariable">$AvailabilityZone</span>.Length-1))<br>
					<span class="PSVariable">$currentServer</span> = (Get-EC2Instance).Instances<br>
					[string]<span class="PSVariable">$SubnetID</span> = <span class="PSVariable">$currentServer</span>.subnetID<br>
					<span class="PSVariable">$Subnet</span> = get-ec2subnet <span class="PSVariable">$SubnetID</span><br>
					[int]<span class="PSVariable">$CurrentSecurityGroupName</span> = (Get-EC2SecurityGroup | where {<span class="PSVariable">$_</span>.description -match "Created on"}).GroupName<br>
					Reset-AwsApiKey<br>
					<span class="PSVariable">$newSecurityGroupID</span> = New-RdpSecurityGroup<br>
					<span class="PSVariable">$newServer</span> = (Get-EC2Instance <span class="PSVariable">$newServer</span>.instanceid).Instances<br>
					Edit-EC2InstanceAttribute -InstanceId <span class="PSVariable">$newServer</span>.InstanceId -Group @(<span class="PSVariable">$DefaultSecurityGroupID</span>, <span class="PSVariable">$newSecurityGroupID</span>)<br>
					Remove-EC2SecurityGroup -GroupId (Get-EC2SecurityGroup -GroupName <span class="PSVariable">$CurrentSecurityGroupName</span>).GroupId -Force<br>
				</div>
			</div><br><br>			<div class="textBubbleBG">
				<h2 id="12222021"><a href="#12222021">12/22/2021</a> - If a tree falls in the forest, and there's nobody around, is it art?</h2>
				<h3>...imitates life imitates art imitates life imitates art...</h3>
				<p>Life and art oscillate through an imitation field as they travel through time, not unlike electric and magnetic fields.</p>
				<ul>
				<li>Art makes you feel something. Art causes an emotional response within an emotional consciousness.</li>
				<li>Life is a set of chemical and physical processes that balance and drive each other against entropy over large time frames.</li>
				</ul>
				<p>If you're comprehending this,  then you're a set of chemical and physical processes complex enough to have developed a consciousness, and maybe emotions too. As sounds are merely vibrations until turned into electomechanical sensations by our bodies and brains, so too art is merely a collection of objects (or vibrations, see music) until turned into electromechanical sensations by our bodies and brains.</p>
				<p>A lot of living objects are incapable of perceiving art, and so cannot imitate it. And some living objects *are* art, as they make other living objects feel emotions, such as the desire to smash/pairbond/eat the earlier life. As though life and art are two aspects of the same coin - life is art, and art creates impulses that drive life.</p>
				<p>A tree falling in a forest - it makes me feel glad I'm not there for the tree to injure.</p>
			</div><br><br>
			<div class="textBubbleBG">
				<h2 id="12212021"><a href="#12212021">12/21/2021</a> - Inverted dice values making a moire pattern.</h2>
				<h3>Table 1: Started with a classic 2d6 table:</h3>
				<table id="2d6table1">
				<tr><th>+</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th></tr>
				<tr><th>1</th><td>2</td><td class="blue0">3</td><td class="blue1">4</td><td class="blue2">5</td><td class="blue3">6</td><td class="blue4">7</td></tr>
				<tr><th>2</th><td class="blue0">3</td><td class="blue1">4</td><td class="blue2">5</td><td class="blue3">6</td><td class="blue4">7</td><td class="blue5">8</td></tr>
				<tr><th>3</th><td class="blue1">4</td><td class="blue2">5</td><td class="blue3">6</td><td class="blue4">7</td><td class="blue4">8</td><td class="blue6">9</td></tr>
				<tr><th>4</th><td class="blue2">5</td><td class="blue3">6</td><td class="blue4">7</td><td class="blue5">8</td><td class="blue5">9</td><td class="blue7">10</td></tr>
				<tr><th>5</th><td class="blue3">6</td><td class="blue4">7</td><td class="blue5">8</td><td class="blue6">9</td><td class="blue7">10</td><td class="blue8">11</td></tr>
				<tr><th>6</th><td class="blue4">7</td><td class="blue5">8</td><td class="blue6">9</td><td class="blue7">10</td><td class="blue8">11</td><td class="blue9">12</td></tr>
				</table>
				<p>This shows all possible values, with the classic diagonal gradient, showing how entropy makes 2d6 sum to 7 more often than any other value, across the diagonal from the lower-left corner to the upper-right corner. The two d6 are the axes, and the dice rolls are the center of the chart. It's a nice and pretty gradient going from the upper-left corner to the lower-right corner. But what if we pretended these were waves, with the even numbers being the wave's positive amplitude, while odd numbers are the negative crests?</p>
				<h3>Table 2</h3>
				<table id="2d6table2">
				<tr><th>+</th><th>-1</th><th>2</th><th>-3</th><th>4</th><th>-5</th><th>6</th></tr>
				<tr><th>-1</th><td class="blue2">-2</td><td class="red1">1</td><td class="blue4">-4</td><td class="red3">3</td><td class="blue6">-6</td><td class="red5">5</td></tr>
				<tr><th>2</th><td class="red1">1</td><td class="blue4">4</td><td class="red1">-1</td><td class="blue6">6</td><td class="red3">-3</td><td class="blue7">8</td></tr>
				<tr><th>-3</th><td class="blue4">-4</td><td class="red1">-1</td><td class="blue6">-6</td><td class="red1">1</td><td class="blue7">-8</td><td class="red3">3</td></tr>
				<tr><th>4</th><td class="red3">3</td><td class="blue6">6</td><td class="red1">1</td><td class="blue7">8</td><td class="red1">-1</td><td class="blue8">10</td></tr>
				<tr><th>-5</th><td class="blue6">-6</td><td class="red3">-3</td><td class="blue7">-8</td><td class="red1">-1</td><td class="blue8">-10</td><td class="red1">1</td></tr>
				<tr><th>6</th><td class="red5">5</td><td class="blue7">8</td><td class="red3">3</td><td class="blue8">10</td><td class="red1">1</td><td class="blue9">12</td></tr>
				</table>
				<p>It seems like a moire pattern at first glance. After staring at it for a bit, the first thing I saw was that only even numbers seem to follow the same gradient pattern as the above chart, but they flip-flop from positive to negative as they move across the diagonal from lower-left to upper-right - very wavelike! The second thing I noticed was that odd numbers <i>do</i> have diagonals, but they're the other diagonal (upper-left to lower-right, just like the 7s in the top table), and also flip-flop from positive to negative.</p> 
				<h3>Table 3: Flipping this pattern, from odd-negative to even-negative, just reverses the signs of Table 2.</h3>
				<table id="2d6table3">
				<tr><th>+</th><th>1</th><th>-2</th><th>3</th><th>-4</th><th>5</th><th>-6</th></tr>
				<tr><th>1</th><td class="red2">2</td><td class="blue1">-1</td><td class="red4">4</td><td class="blue3">-3</td><td class="red6">6</td><td class="blue5">-5</td></tr>
				<tr><th>-2</th><td class="blue1">-1</td><td class="red4">-4</td><td class="blue1">1</td><td class="red6">-6</td><td class="blue3">3</td><td class="red7">-8</td></tr>
				<tr><th>3</th><td class="red4">4</td><td class="blue1">1</td><td class="red6">6</td><td class="blue1">-1</td><td class="red7">8</td><td class="blue3">-3</td></tr>
				<tr><th>-4</th><td class="blue3">-3</td><td class="red6">-6</td><td class="blue1">-1</td><td class="red7">-8</td><td class="blue1">1</td><td class="red8">-10</td></tr>
				<tr><th>5</th><td class="red6">6</td><td class="blue3">3</td><td class="red7">8</td><td class="blue1">1</td><td class="red8">10</td><td class="blue1">-1</td></tr>
				<tr><th>-6</th><td class="blue5">-5</td><td class="red7">-8</td><td class="blue3">-3</td><td class="red8">-10</td><td class="blue1">-1</td><td class="red9">-12</td></tr>
				</table>
				<p>For diagonal clarity, we can call lower-left to upper-right "red diagonals" the others, upper-left to lower-right are "blue diagonals".</p>
				<p>Some numbers become unavailable with this odd-negative system from Table 2: -12, 0, 7, 9, 11, and any odd negative number. This is because numbers which sum with their like types (even + even and odd + odd) increase in magnitude (away from 0), but those that cross (even + odd) decrease in magnitude towards 0. And summing like types results in even numbers, while crossing types produces odd numbers. 7, 9, and 11 are unavailable because they're larger than the largest d6 role, meaning they can't be reached subtractively, only additively - but being odd, they can only be built from a cross-type sum, which can only decrease in magnitude towards zero in this system. In other words, no code paths lead to their output in this finite state machine. -11, -9, and -7 are similar, with the added caveat that both even and odd halves of the cross-type sum would have to be negative, so are doubly unlikely. -12 being unavailalble is an artifact of only being rechable if the largest d6 role is negative, and that being false here, making this code path also unavailable. Zero is unavailable as there are no equal opposite values.</p>
				<h3>Table 4: One step further.</h3>
				<table id="2d6table4">
				<tr><th>+</th><th>-1</th><th>2</th><th>-3</th><th>4</th><th>-5</th><th>6</th></tr>
				<tr><th>1</td><td class="blue1">0</td><td class="red4">3</td><td class="blue3">-2</td><td class="red6">5</td><td class="blue5">-4</td><td class="red7">7</td></tr>
				<tr><th>-2</td><td class="red4">-3</td><td class="blue1">0</td><td class="red6">-5</td><td class="blue3">2</td><td class="red7">-7</td><td class="blue5">4</td></tr>
				<tr><th>3</td><td class="blue3">2</td><td class="red6">5</td><td class="blue1">0</td><td class="red7">7</td><td class="blue3">-2</td><td class="red8">9</td></tr>
				<tr><th>-4</td><td class="red6">-5</td><td class="blue3">-2</td><td class="red7">-7</td><td class="blue1">0</td><td class="red8">-9</td><td class="blue3">2</td></tr>
				<tr><th>5</td><td class="blue5">4</td><td class="red7">7</td><td class="blue3">2</td><td class="red8">9</td><td class="blue1">0</td><td class="red9">11</td></tr>
				<tr><th>-6</td><td class="red7">-7</td><td class="blue5">-4</td><td class="red8">-9</td><td class="blue3">-2</td><td class="red9">-11</td><td class="blue1">0</td></tr>
				</table>
				<p>Mix an even-negative die and odd-negative die. This gives a very different pattern, with a 0 down the middle red diagonal, and numbers reflected across that middle red diagonal - if the upper-right half were "positive", the lower-left half would be "negative", as numbers are the same magnitude but with opposite sign. And unusually, even and odd have switched places, with even numbers on the blue diagonals, and odd numbers on the red diagonals.</p>
				<p>Numbers -12, -10, -8, -6, -1, 1, 6 8, 10, 12 are unavailable here, almost exclusively even numbers. Unlike Table 2, like-type addition decreases in magnitude while cross-type increases in magnitude, but summing like types still results in even numbers (and crossing types produces odd numbers). So even numbers can only be reached by reducing in magnitude, making those equal or above the d6 max roll off limits. And odd numbers can only be reached by increasing in magnitude, blocking off 1 and -1 (which are odd for our purposes here).</p>
				<p>Not sure what to do with this info? You're not alone, as I'm not sure what to do with it either.</p>
				<h3>Table 5: Moar Analysis - rebuilding the original table.</h3>
				<p>The red diagonals from the third and fourth tables combine to remake the first table, but with alternating positive and negative rows:</p>
				<table id="2d6table5">
				<tr><th>+</th><th>1/-1</th><th>-2/2</th><th>3/-3</th><th>-4/4</th><th>5/-5</th><th>-6/6</th></tr>
				<tr><th>1</th><td class="red">2</td><td class="red0">3</td><td class="red1">4</td><td class="red2">5</td><td class="red3">6</td><td class="red4">7</td></tr>
				<tr><th>-2</th><td class="red0">-3</td><td class="red1">-4</td><td class="red2">-5</td><td class="red3">-6</td><td class="red4">-7</td><td class="red5">-8</td></tr>
				<tr><th>3</th><td class="red1">4</td><td class="red2">5</td><td class="red3">6</td><td class="red4">7</td><td class="red5">8</td><td class="red6">9</td></tr>
				<tr><th>-4</th><td class="red2">-5</td><td class="red3">-6</td><td class="red4">-7</td><td class="red5">-8</td><td class="red6">-9</td><td class="red7">-10</td></tr>
				<tr><th>5</th><td class="red3">6</td><td class="red4">7</td><td class="red5">8</td><td class="red6">9</td><td class="red7">10</td><td class="red8">11</td></tr>
				<tr><th>-6</th><td class="red4">-7</td><td class="red5">-8</td><td class="red6">-9</td><td class="red7">-10</td><td class="red8">-11</td><td class="red9">-12</td></tr>
				</table>
				
				<h3>Table 6: Reverting the negatives.</h3>
				<p>This brings back Table 1:</p>
				<table id="2d6table6">
				<tr><th>+</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th></tr>
				<tr><th>1</th><td class="red">2</td><td class="red0">3</td><td class="red1">4</td><td class="red2">5</td><td class="red3">6</td><td class="red4">7</td></tr>
				<tr><th>2</th><td class="red0">3</td><td class="red1">4</td><td class="red2">5</td><td class="red3">6</td><td class="red4">7</td><td class="red5">8</td></tr>
				<tr><th>3</th><td class="red1">4</td><td class="red2">5</td><td class="red3">6</td><td class="red4">7</td><td class="red5">8</td><td class="red6">9</td></tr>
				<tr><th>4</th><td class="red2">5</td><td class="red3">6</td><td class="red4">7</td><td class="red5">8</td><td class="red6">9</td><td class="red7">10</td></tr>
				<tr><th>5</th><td class="red3">6</td><td class="red4">7</td><td class="red5">8</td><td class="red6">9</td><td class="red7">10</td><td class="red8">11</td></tr>
				<tr><th>6</th><td class="red4">7</td><td class="red5">8</td><td class="red6">9</td><td class="red7">10</td><td class="red8">11</td><td class="red9">12</td></tr>
				</table>
				
				<h3>Table 7: The other half.</h3>
				<p>What do you get when you combine the blue diagonals from the third and the fourth tables? This is like the opposite of Table 5:</p>
				<table id="2d6table7">
				<tr><th>+</th><th>-1/1</th><th>2/-2</th><th>-3/3</th><th>4/-4</th><th>-5/5</th><th>6/-6</th></tr>
				<tr><th>1</td><td class="blue1">0</td><td class="blue2">-1</td><td class="blue3">-2</td><td class="blue4">-3</td><td class="blue5">-4</td><td class="blue7">-5</td></tr>
				<tr><th>-2</td><td class="blue2">-1</td><td class="blue1">0</td><td class="blue2">1</td><td class="blue3">2</td><td class="blue4">3</td><td class="blue5">4</td></tr>
				<tr><th>3</td><td class="blue3">2</td><td class="blue2">1</td><td class="blue1">0</td><td class="blue2">-1</td><td class="blue3">-2</td><td class="blue4">-3</td></tr>
				<tr><th>-4</td><td class="blue4">-3</td><td class="blue3">-2</td><td class="blue2">-1</td><td class="blue1">0</td><td class="blue2">1</td><td class="blue3">2</td></tr>
				<tr><th>5</td><td class="blue5">4</td><td class="blue4">3</td><td class="blue3">2</td><td class="blue2">1</td><td class="blue1">0</td><td class="blue2">-1</td></tr>
				<tr><th>-6</td><td class="blue7">-5</td><td class="blue5">-4</td><td class="blue4">-3</td><td class="blue3">-2</td><td class="blue2">-1</td><td class="blue1">0</td></tr>
				</table>
				
				<h3>Table 8: Reverting Table 7's negatives.</h3>
				<p>This gives us a subtraction table:</p>
				<table id="2d6table8">
				<tr><th>-</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th></tr>
				<tr><th>1</td><td class="blue4">0</td><td class="blue3">-1</td><td class="blue2">-2</td><td class="blue1">-3</td><td class="blue0">-4</td><td class="blue">-5</td></tr>
				<tr><th>2</td><td class="blue5">1</td><td class="blue4">0</td><td class="blue3">-1</td><td class="blue2">-2</td><td class="blue1">-3</td><td class="blue0">-4</td></tr>
				<tr><th>3</td><td class="blue6">2</td><td class="blue5">1</td><td class="blue4">0</td><td class="blue3">-1</td><td class="blue2">-2</td><td class="blue1">-3</td></tr>
				<tr><th>4</td><td class="blue7">3</td><td class="blue6">2</td><td class="blue5">-1</td><td class="blue4">0</td><td class="blue3">-1</td><td class="blue2">-2</td></tr>
				<tr><th>5</td><td class="blue8">4</td><td class="blue7">3</td><td class="blue6">2</td><td class="blue5">1</td><td class="blue4">0</td><td class="blue3">-1</td></tr>
				<tr><th>6</td><td class="blue9">5</td><td class="blue8">4</td><td class="blue7">3</td><td class="blue6">2</td><td class="blue5">1</td><td class="blue4">0</td></tr>
				</table>
				<p>Is this the inverse or complement of Table 1?</p>
			</div><br><br>
			<div class="textBubbleBG">
				<h2 id="12202021"><a href="#12202021">12/20/2021</a> - The Log4J hack explained.</h2>
				<p>The hack itself is pretty simple, <a href="https://www.youtube.com/watch?v=Z22O5uEsF6U">as explained by FitMC</a>: just send "${JDNI:LDAP" followed by any command (and eventually the closing curly brace). Here's how it works:</p>
				<ul>
				<li>Dollar sign and curly braces ${ } <a href="https://stackoverflow.com/questions/35835362/what-does-dollar-sign-and-curly-braces-mean-in-a-string-in-javascript#35835393">are a way of adding arbitrary code - usually a variable</a> - in the middle of a string. This makes a template that can be used often without modifying. Imagine if every customer needed a custom version of your software or website, with their name coded in every Name field.</li>
				<ul>
					<li>It's frequently used to personalize a string: <span class="codeWrapper">`Hello ${User.FirstName}, how are you?`</span></li>
					<li>Sometimes it's badly used: <span class="codeWrapper">`Hello ${String[] userName = User.name.split(" ");userName[0];}, how are you?`</span></li>
					<li>This feature should be escaped or caught within Log4J, and these commands should show up harmlessly in the weblogs instead.</li>
				</ul>
				<li><a href="https://docs.oracle.com/javase/tutorial/jndi/overview/dir.html">JNDI (Java Naming and Directory Interface)</a> is a built-in directory lookup tool, and has interfaces for common directories, one of which is <a href="https://en.wikipedia.org/wiki/Lightweight_Directory_Access_Protocol">LDAP (Lightweight Directory Access Protocol)</a>.</li>
				<ul>
					<li>The most popular implementation of LDAP is <a href="https://en.wikipedia.org/wiki/Active_Directory">Microsoft Active Directory</a>, so this interface is likely widely used for legitimate purposes.</li>
					<li>The JNDI LDAP package has an "Extended" Operation mode, which is likely what's being hit here. I'm guessing the LDAP package's <a href="https://www.w3schools.com/java/java_switch.asp">default switch</a> puts whatever is sent to it inside <a href="https://docs.microsoft.com/en-us/dotnet/api/java.lang.runtime.exec">Runtime.exec()</a>.</li>
				</ul>
				</ul><p>And that's pretty much it. This exploit uses built-in Java notation to escape Log4J program, and a built-in Java directory lookup service, which seems to allow arbitrary code execution. Evil here isn't the result of people acting maliciously and writing evil code with their "evil hats" on, but the result of gaps between good intentions. Unlike Batman or Charlie's Angels, there's no Mr Robot to punch away and stop future hacks. Instead, a resurgence of code analysis tools and <a href="https://en.wikipedia.org/wiki/Code_smell">code evaluation techniques</a> will likely create the greatest benefit at the least cost.</p>
			</div><br><br>
			<div class="textBubbleBG">
				<h2 id="12152021"><a href="#12152021">12/15/2021</a> - Capitalism levels.</h2>
				<p>Capitalism is a system for transferring and exchanging physical, liquid, and intangible assets. It has 2 categorizes for resources: money, and everything that can be bought with money - which includes the time of humans to perform work that legally belongs to you. </p>
				<ol>
				<li>Provide Raw Materials: From mining, lumberjacking, farming, shipping (traveling merchants), etc.</li>
				<li>Build Components: Take raw materials and turn them into tools. (Foundry forms refined ores into sheets, wires, tubes, and other forms.)</li>
				<li>Assemble Components: Take tools as components and assemble into composite products (Radio maker takes coils, crystals, speakers, wires, &amp; wooden boxes, and outputs radios.)</li>
				<li>Expand the Market: Transform products into new forms that open up new uses and/or new customers. (Miniaturize the cabinet-sized radio into a pocket radio.)</li>
				<li>Advertising: People tend to do what they're told, so tell them to buy your radio.</li>
				<li>Market Capture: Merge with old competition and acquire new competition. Spin off irrelevant SBUs in other markets to maintain regulatory compliance.</li>
				<li>?</li>
				</ol>
			</div><br><br>
			<div class="textBubbleBG">
				<h2 id="12142021"><a href="#12142021">12/14/2021</a> - Legends and Theories.</h2>
				<p>Legends and theories are both stories. Legends are supposed to always be false if they are falsifiable, while theories must be falsifiable but can be true. But sometimes legends become true too.</p>
				<table>
				<tr><th></th><th>Falsifiable</th><th>False</th><th>True</th></tr>
				<tr><td>Legend</td><td>Either</td><td>Always</td><td>Never</td></tr>
				<tr><td>Theory</td><td>Always</td><td>Either</td><td>Either</td></tr>
				<tr><td>Oops</td><td>Yes</td><td>No</td><td>Yes</td></tr>
				</table>
				<p>So is a falsifiable legend that becomes true actually a theory?</p>
			</div><br><br>
			<div class="textBubbleBG">
				<h2 id="12112021"><a href="#12112021">12/11/2021</a> - Two Megabytes of World History!!1!.</h2>
				<p>The <a href="https://www.Gilgamech.com/history.html">World History</a> page, including over 6,000 past and future events, now weighs in a at a beefy 2,098,673 bytes of history in a big table. This project was started in 2016, but didn't hit the 1 MB mark until shortly after going online in <a href="https://www.Gilgamech.com/2021/August.html#08022021">August</a>, so that's 1 MB or 3000 entries in 120 days, or 25 per day. Most of these were periodic events like reigns of kings, emperors, pharoahs, and cicadas. Based on an average rate of 10 per day, we should reach 3 MB or 9000 total entries in October 2022. Future plans include "We didn't start the fire" for January and maybe February, depending on how long it takes. Then catching up on the nigh-infinite backlog. Happy reading!</p>
			</div><br><br>
			<div class="textBubbleBG">
				<h2 id="12072021"><a href="#12072021">12/7/2021</a> - This backpack is a game-charger.</h2>
				<p>This has been in the back of my mind for over 20 years - a laptop backpack that you could plug in. APC killed off this idea around 2007 by releasing an inferior product - a laptop bag with some USB ports and a built-in USB battery. So here is the kit:</p><ul>
				<li><a href="https://solo-ny.com/collections/hybrid-backpacks">Solo-NY Duane hybrid briefcase backpack</a></li>
				<li><a href="https://www.bestbuy.com/site/j5create-usb-c-travel-dock/6353902.p?skuId=6353902">j5create - USB-C Travel Dock</a></li>
				<li><a href="https://www.razer.com/gaming-mice/razer-naga-pro/RZ01-03420100-R3U1">Razer Naga Pro</a></li>
				<li>3 outlet 2 prong power strip</a></li>
				<li><a href="https://www.monoprice.com/product?p_id=3992">Monoprice 4K High Speed HDMI Cable 12ft - 18Gbps Black</a> </li>
				<li>Sonicare Toothbrush</a></li>
				<li>Other USB or 2 prong devices.</li>
				<li>Optional upgrade: <a href="https://www.amazon.com/Sabrent-Adapter-Control-Switches-HB-U14P/dp/B00HL7Z46K/ref=sr_1_9?keywords=12%2Bport%2Busb%2Bhub&qid=1638922535&sr=8-9&th=1">12+ port USB hub</a> for the USB professional</li>
				</ul>
				<p>It enables a portable IT generalist to use their laptop across a variety of modes:</p> 
				<ul>
				<li>Full wireless - laptop and mouse in bluetooth mode.</li>
				<li>Wired mouse - Plugin laptop and mouse for charging and better responsiveness.</li>
				<li>Powered system - Plug the bag into a power outlet for full gaming speed. Also charges the laptop, mouse, and any connected devices.</li>
				<li>Projected system - Plug the bag into any HDMI TV or monitor and dazzle the conference room, get a lot of work done on a second monitor, or relax and watch a movie on the big screen.</li>
				<li>Powered and Projected - Plug into both HDMI and a power outlet to move your game to the big screen. Also charges everything.</li>
				</ul>
				<p>Freedom to game and travel around the planet can be yours for just $699. <a href="mailto:LaptopDockBag@Gilgamech.com">Order yours now!</a>.</p> 
				<ul>
			</div><br><br>
			<div class="textBubbleBG">
				<h2 id="12062021"><a href="#12062021">12/6/2021</a> - Birds and squirrels plant seeds.</h2>
				<p>As winter approaches, birds, squirrels, and other small woodland creatures hide seeds to eat through the darker months, when the self-assembling solar-powered machines (plants) are receiving too little solar radiation and ambient heat to effectively grow and produce fruit. Many of these critters have common hiding places of under specific rocks, branches, roots, etc - in the ground, where it could seed and grow in the spring. But first the bird or squirrel retrieves it for a meal...unless an owl, fox, or car got to the critter first, in which case the hidden snacks are already in the ground to start growing next spring.</p>
				<p>Yes, seeds transport in a great many ways (defecation vacation), but this pattern has struck me for some time as uniquely special - animals planting seeds - and has a symmetry with bees having to brush past plant gentials to get the tasty syrup. Like one organism where the DNA needed to survive is split between lineages in two different biological kingdoms.</p>
			</div><br><br>
			<div class="textBubbleBG">
				<h2 id="12052021"><a href="#12052021">12/5/2021</a> - This is now called "bong science".</h2>
				<p><i>"The photon goes through both slits, and because we're not watching very closely, it interferes with itself as it goes through, so it hits the back wall in this pattern of lines. Isn't quantum physics <strong>weird, </strong>man?"</i></p>
				<p>It's like there are two schools of thought on quantum physics:</p><ul>
				<li>An almost-invisible group that's creating falsifiable theories and performing repeatable experiments</li>
				<li>An extremely loud and incredibly well animated group that clearly explains (skipping over a few unimportant details) this odd and confounding quirk that we cannot understand, and after a Word From Our Sponsor, bring in the experts who mourn how the laws of physics prevent understanding it.</li>
				</ul>
				<p>It's <a href="https://www.youtube.com/c/SabineHossenfelder">Sabine Hossenfelder</a> that's popular among first group lately, and her videos have reignited much of my interest in quantum physics.</p>
				<p>The second group are pushing what I'm calling "bong science" - <i>everyone circle around with your cannabis vape pens and get a load of how strange are these quantum particles. Can you believe quarks live in a threesome? In the double-slit experiment, Copenhagen says we aren't able to know which slit the photon chooses to go through, unless we "observe" and then it stops making the cool lines.</i> - taking ideas from different theories like science is a salad bar, Frankensteining a theory which is mostly wrong, a little made up, very entertaining, and entirely useless. But at least it sells those ad clicks!</p>
			</div><br><br>
			<div class="textBubbleBG">
				<h2 id="12022021"><a href="#12022021">12/2/2021</a> - What new democratization of technology will not be foreseen by futurists before it arrives?</h2>
				<p>Why did no futurist predict the iPhone? Why did nobody foretell the Model T in popular culture?</p>
				<p>One oft-noted futuristic prediction is the proto-nuclear submarine in that foundational underwater science fiction classic, 20k Leagues Under The Sea. The powerplant enables indefinite submerged operation, unlike the other alternatives - diesel-electric (with huge batteries that last for days) or steam (which required an overwhelming ship and may have lasted for days). In the 1980s, pressurized air became a supplementary power storage option, adding maybe a day to the diesel-electric option.</p>
				<p>Ford's Model T was like the iPhone or PSVR of cars. It democratized the technology and brought it down to a price point where everyone could afford one and rich people could afford 5. This didn't happen for trains because of the difficulty in sharing rails as compared to sharing roadways, where you can just signal and change lanes, and don't need a switched section of roadway to hop to a neighboring lane. (In roads, narrow curbs can still be added between lanes to prevent lane-changing and shape traffic flow around congested areas.) Instead, the "block" system was developed in the 1800s to prevent two trains from using the same section of track, after numerous deadly train collisions in the UK. </p>
			</div><br><br>
			<div class="textBubbleBG">
				<h2 id="12012021"><a href="#12012021">12/1/2021</a> - Site rotation code update.</h2>
				<p>#It's become a tradition on this blog to start the month with a new iteration of the same old code. Added annotation for steps to be done "remote" (your own laptop etc) vs "server" (the one you're building). Fun fact: The "code" sections below are actually grey (same #ccc as always) and only look red due to the contrast with the "bubble" div.</p>
				<h2>#Remote</h2>
				<h3>#Step 1: Initializing server variables</h3>
				<h4>#Step 1a: Manual variables - update with your private values:</h4>
				<div class="codeWrapper">
					[string]<span class="PSVariable">$AvailabilityZone</span> = "us-west-2a"<br>
					[string]<span class="PSVariable">$DefaultSecurityGroupID</span> = "DEFAULTSG"<br>
					[string]<span class="PSVariable">$Keypair</span> = "KEYPAIRNAME"<br>
					[string]<span class="PSVariable">$PemFile</span> = "C:\Secure\Location\<span class="PSVariable">$Keypair</span>.pem"<br>
				</div>
				<h4>#Step 1b: Dynamic variables - just run these.</h4>
				<div class="codeWrapper">
					Set-DefaultAWSRegion -Region (<span class="PSVariable">$AvailabilityZone</span>.Substring(0,<span class="PSVariable">$AvailabilityZone</span>.Length-1))<br>
					<span class="PSVariable">$currentServer</span> = (Get-EC2Instance).Instances<br>
					[string]<span class="PSVariable">$SubnetID</span> = <span class="PSVariable">$currentServer</span>.subnetID<br>
					<span class="PSVariable">$Subnet</span> = get-ec2subnet <span class="PSVariable">$SubnetID</span><br>
					[int]<span class="PSVariable">$CurrentSecurityGroupName</span>=(Get-EC2SecurityGroup | where {<span class="PSVariable">$_</span>.description -match "Created on"}).GroupName<br>
				</div>
				<h3>#Prerequisite 1: utility function:</h3>
				<p>#This function takes bytes as input, and outputs ASCII (or Unicode) characters.</p>
				<div class="codeWrapper">
				Filter Flip-BytesToText {<br><ul>
					Param(<br><ul>
						[switch]<span class="PSVariable">$Unicode</span><br>
						</ul>
						); <span class="PSComment">#end Param</span><br>
						[int]<span class="PSVariable">$Unicode2</span> = 0<br>
						<span class="PSVariable">$ReturnString</span> = ""<br>
						if (<span class="PSVariable">$_</span>) {<br><ul>
							if (<span class="PSVariable">$Unicode</span>) {<br><ul>
									<span class="PSVariable">$ReturnString</span> = [System.Text.Encoding]::Unicode.GetString((<span class="PSVariable">$_</span>,<span class="PSVariable">$Unicode2</span>))<br>
							</ul>
							} else {<br><ul>
									<span class="PSVariable">$ReturnString</span> = [System.Text.Encoding]::ASCII.GetString(<span class="PSVariable">$_</span>)<br>
							</ul>
							}; <span class="PSComment">#end if Unicode</span><br>
							if (<span class="PSVariable">$ReturnString</span> -ne "") {<br><ul>
								return <span class="PSVariable">$ReturnString</span><br>
							</ul>
							}; <span class="PSComment">#end if ReturnString</span><br>
						</ul>
					}; <span class="PSComment">#end if _</span><br>
					</ul>
				}; <span class="PSComment">#end Flip-BytesToText</span><br>
				</div>
				<h3>#Prerequisite 2: Rotate AWS key</h3>
				<p>#Updating this function with a progress bar to countdown the 30 seconds.</p>
				<div class="codeWrapper">
				Function Reset-AwsApiKey {<ul>
					<span class="PSVariable">$oldKey</span> = (Get-AWSCredential default).GetCredentials().AccessKey<br>
					<span class="PSVariable">$key</span> = New-IAMAccessKey<br>
					Set-AWSCredential -AccessKey <span class="PSVariable">$key</span>.AccessKeyId -SecretKey <span class="PSVariable">$key</span>.SecretAccessKey -StoreAs default<br>
					0..30| %{Write-Progress -Activity "Sleeping for keys to settle down." -Status "Countdown to 30 seconds: $_" -PercentComplete ($_*3.33);sleep 1}<br>
					Remove-IAMAccessKey -AccessKeyId <span class="PSVariable">$oldKey</span> -Force</ul>
				}
				</div>
				<h3>#Step 2: New Security Group</h3>
				<p>#Updating this function with a better name for the SG.</p>
				<div class="codeWrapper">
				Function New-RdpSecurityGroup {<br>
				<ul>
					[ipaddress]<span class="PSVariable">$IpAddress</span> = (((iwr https://checkip.amazonaws.com).content | Flip-BytesToText ) -replace "`n","" -join "")<br>
					[string]<span class="PSVariable">$IpCidr</span> = (<span class="PSVariable">$IpAddress</span>.IPAddressToString+"/32")<br>
					<br>
					[string]<span class="PSVariable">$GroupDesc</span>="Created on "+(Get-date -f d)+" - access from "+<span class="PSVariable">$IpCidr</span><br>
					New-EC2SecurityGroup -Description <span class="PSVariable">$GroupDesc</span> -GroupName (<span class="PSVariable">$CurrentSecurityGroupName</span>+1) -VpcId <span class="PSVariable">$Subnet</span>.VpcId<br>
					<br>
					<span class="PSVariable">$cidrBlocks</span> = New-Object 'collections.generic.list[string]'<br>
					<span class="PSVariable">$cidrBlocks</span>.add(<span class="PSVariable">$IpCidr</span>)<br>
					<br>
					<span class="PSVariable">$ipPermissions</span> = New-Object Amazon.EC2.Model.IpPermission<br>
					<span class="PSVariable">$ipPermissions</span>.IpProtocol = "tcp"<br>
					<span class="PSVariable">$ipPermissions</span>.FromPort = 3389<br>
					<span class="PSVariable">$ipPermissions</span>.ToPort = 3389<br>
					<span class="PSVariable">$ipPermissions</span>.IpRanges = <span class="PSVariable">$cidrBlocks</span><br>
					<br>
					Grant-EC2SecurityGroupIngress -GroupName (<span class="PSVariable">$CurrentSecurityGroupName</span>+1) -IpPermissions <span class="PSVariable">$ipPermissions</span>	<br>
				</ul>
				}
				</div>
				<h3>#Step 3: Build Windows server</h3>
				<p>#This step ends in a 5 minute wait for the new server to complete building.</p>
				<div class="codeWrapper">
				Reset-AwsApiKey<br>
				<span class="PSVariable">$newSecurityGroupID</span> = New-RdpSecurityGroup<br>
				<span class="PSVariable">$newServer</span> = (New-EC2Instance -ImageId (Get-EC2ImageByName "WINDOWS_2016_BASE").ImageId -SecurityGroupId <span class="PSVariable">$newSecurityGroupID</span> -InstanceType "t2.micro" -AvailabilityZone <span class="PSVariable">$AvailabilityZone</span> -KeyName <span class="PSVariable">$Keypair</span> -SubnetId <span class="PSVariable">$Subnet</span>.SubnetId).instances<br>
				0..300| %{Write-Progress -Activity "Sleeping for server $(<span class="PSVariable">$newServer</span>.instanceid) to complete." -Status "Countdown to 300 seconds: $_" -PercentComplete ($_*.333);sleep 1}<br>
				<span class="PSVariable">$newServer</span> = (Get-EC2Instance <span class="PSVariable">$newServer</span>.instanceid).Instances<br>
				</div>
				<h3>#Step 4: Login and configure</h3>
				<h4>#Step 4a: Server login</h4>
				<p>#This retrieves the password and launches MSTSC (MS-RDP) to the server. Instead of storing the server password, store this command.</p>
				<div class="codeWrapper">
				Get-EC2PasswordData -InstanceId <span class="PSVariable">$newServer</span>.InstanceId -PemFile <span class="PSVariable">$PemFile</span> -Decrypt | clip<br>
				mstsc.exe /v:(<span class="PSVariable">$newServer</span>.publicIPaddress)<br>
				</div>
				<h2>#Server</h2>
				<h4>#Step 4b: Client variables - manual</h4>
				<p>#Again, update these with your own values</p>
				<div class="codeWrapper">
					[string]<span class="PSVariable">$rootDomain</span> = "Example.com"<br>
					[string]<span class="PSVariable">$subDomain</span> = "Subdomain"<br>
					[string]<span class="PSVariable">$CFAuthKey</span> = 'CFAUTHKEYGOESHERETHISONEISLONG'<br>
					[string]<span class="PSVariable">$CFAuthEmail</span> = 'YourEmail@$rootDomain'<br>
					[string]<span class="PSVariable">$PFXPass</span> = '$tr0ngPa$$W0rdG03$|-|3r3'<br>
				</div>
				<h4>#Step 4c: Client variables - dynamic</h4>
				<p>#Just run 'em.</p>
				<div class="codeWrapper">
					[array]<span class="PSVariable">$Domains</span> = ("*.$rootDomain","*.$subDomain.$rootDomain","$rootDomain")<br>
					[string]<span class="PSVariable">$ContactEmail</span> = 'Contact@$rootDomain'<br>
					[string]<span class="PSVariable">$DownloadPath</span> = "C:\LetsEncryptCerts\$((Get-Date).ToString('yyyyMM'))"<br>
					[array]<span class="PSVariable">$Computer</span> = ((hostname))<br>
					[string]<span class="PSVariable">$FriendlyName</span> = ("LetsEncrypt_$((Get-Date).AddDays(90).ToString('yyyy-MM-dd'))")<br>
				</div>
				<h4>#Step 4d: Install software</h4>
				<p>#These install IIS, upgrade .NET's outbound security protocol to TLS 1.2, and install the Posh-ACME module. Posh-ACME is the toolkit that lets us request the LE cert. The TLS upgrade is needed because TLS 1.1 is used for compatibility, but more secure hosts disconnect instead of negotiating.</p>
				<div class="codeWrapper">
				Enable-WindowsOptionalFeature -Online -FeatureName IIS-WebServerRole<br>
				[Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12<br>
				Install-PackageProvider -Name NuGet -MinimumVersion 2.8.5.201 -Force<br>
				Install-Module -Name Posh-ACME -Force<br>
				</div>
				<h3>#Step 5: Request LE Cert</h3>
				<h4>#Step 5a: Information Gathering</h4>
				<p>#Feel free to copy website code to c:\inetpub\wwwroot before/while running these steps. </p>
				<div class="codeWrapper">
					Set-PAServer LE_PROD<br>
					<span class="PSVariable">$CFParams</span> = @{CFAuthEmail=<span class="PSVariable">$CFAuthEmail</span>; CFAuthKey=<span class="PSVariable">$CFAuthKey</span>}<br>
					<span class="PSVariable">$NewCertificate</span> = New-PACertificate <span class="PSVariable">$Domains</span> -AcceptTOS -Contact <span class="PSVariable">$ContactEmail</span> -DnsPlugin Manual -FriendlyName <span class="PSVariable">$FriendlyName</span> -PluginArgs <span class="PSVariable">$CFParams</span> -DNSSleep 180 -PfxPass <span class="PSVariable">$PFXPass</span> -Force <br>
				</div>
				<h4>#Step 5b: Goto your registrar and add the A records for _acme-challenge et al.</h4>
				<p>#Leave off the domain when adding to the registrar website or console. This process uses manual domain verification, until Google Domains automation can be developed.</p>
				<div class="codeWrapper">
					C:\Programs\BIND\dig.exe txt `@8.8.8.8 _acme-challenge.$rootDomain<br>
				</div>
				<h4>#Step 5c: Copy to fileserver</h4>
				<div class="codeWrapper">
					mkdir <span class="PSVariable">$DownloadPath</span> -Force<br>
					<span class="PSVariable">$Path</span> = Get-PACertificate | select -ExpandProperty CertFile<br>
					<span class="PSVariable">$Path</span> = <span class="PSVariable">$Path</span>.Substring(0,<span class="PSVariable">$Path</span>.LastIndexOf('\'))<br>
					Copy-Item "<span class="PSVariable">$Path</span>\cert.cer" <span class="PSVariable">$DownloadPath</span> -Force<br>
					Copy-Item "<span class="PSVariable">$Path</span>\cert.key" <span class="PSVariable">$DownloadPath</span> -Force<br>
					Copy-Item "<span class="PSVariable">$Path</span>\cert.pfx" <span class="PSVariable">$DownloadPath</span> -Force<br>
				</div>
				<h4>#Step 5d: Import PFXPassword, ComputerList and Thumbprint</h4>
				<div class="codeWrapper">
					<span class="PSVariable">$PFXPassword</span> = <span class="PSVariable">$PFXPass</span> | ConvertTo-SecureString -AsPlainText -Force<br>
					<span class="PSVariable">$Thumbprint</span> = <span class="PSVariable">$NewCertificate</span>.Thumbprint<br>
				</div>
				<h4>#Step 5e: Deploy</h4>
				<div class="codeWrapper">
					Copy-Item "<span class="PSVariable">$DownloadPath</span>\Cert.pfx" "\\<span class="PSVariable">$Computer</span>\c$"<br>
					Import-PfxCertificate -FilePath "C:\cert.pfx" -CertStoreLocation Cert:\LocalMachine\My\ -Exportable:<span class="PSVariable">$false</span> -Password <span class="PSVariable">$PFXPassword</span><br>
					<span class="PSVariable">$Cert</span> = Get-ChildItem Cert:\LocalMachine\My\<span class="PSVariable">$Thumbprint</span><br>
					<span class="PSVariable">$Cert</span>.FriendlyName = <span class="PSVariable">$FriendlyName</span><br>
				</div>
				<h4>#Step 5f: Cleanup</h4>
				<div class="codeWrapper">
					Remove-Item "\\<span class="PSVariable">$Computer</span>\c$\cert.pfx"<br>
					Get-ChildItem Cert:\LocalMachine\My\ | Where-Object {(<span class="PSVariable">$_</span>.Subject -eq "CN=*.<span class="PSVariable">$rootDomain</span>") -and (<span class="PSVariable">$_</span>.ThumbPrint -ne <span class="PSVariable">$Thumbprint</span>)} | Remove-Item -Force<br>
				</div>
				<h3>#Step 6: Bind port 443 to IIS</h3>
				<p>#Now that we've populated the SSL cert, we can bind applications to port 443.</p>
				<div class="codeWrapper">
					New-WebBinding -Name "Default Web Site" -IPAddress "*" -Port 443 -Protocol "https"<br>
					(Get-WebBinding -Name "Default Web Site" -Port 443 -Protocol "https").AddSslCertificate(<span class="PSVariable">$Thumbprint</span>, "my")<br>
				</div>
				<h2>#Remote</h2>
				<h3>#Step 7: Add hosting access to server</h3>
				<p>#This lets the public internet reach the server on ports 80 and 443. Updated to lookup the sole instance ID.</p>
				<div class="codeWrapper">
				Edit-EC2InstanceAttribute -InstanceId <span class="PSVariable">$newServer</span>.InstanceId -Group @(<span class="PSVariable">$DefaultSecurityGroupID</span>, <span class="PSVariable">$newSecurityGroupID</span>)<br>
				</div>
				<h3>#Step 8: Transfer domain in Google Domains</h3>
				<p>#Move the domain to your new server's public IP. <a href="https://blog.jakeweaver.io/2019/01/google-domains-dynamic-dns-updates.html">This is a todo.</a></p>
				<div class="codeWrapper">
				</div>
				<h3>#Step 9: Cleanup old server and SG.</h3>
				<p>#Deleting the server will remove the public IP too. Then removing the SG completes cleanup. </p>
				<div class="codeWrapper">
					Remove-EC2Instance -InstanceId <span class="PSVariable">$currentServer</span>.InstanceId -Force<br>
					Remove-EC2SecurityGroup -GroupId (Get-EC2SecurityGroup -GroupName <span class="PSVariable">$CurrentSecurityGroupName</span>).GroupId -Force<br>
				</div>
			</div><br><br>
		</div><!-- End Content-->
			</div><br><br>
		</div><!-- End Content-->
		<div id="footer" class="copyright"></div><script>convertWebElement('footer',"https://www.sparational.com/sites/footer.md")</script>
	</body>
</html>